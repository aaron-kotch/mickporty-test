(this["webpackJsonpfamily-mart"]=this["webpackJsonpfamily-mart"]||[]).push([[5],{253:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(0);var o=n(382),r=n(383),i=n(350),a=(n(270),n(2)),c=function(e){var t=e.leftSlot,n=e.centerSlot,c=e.rightSlot;return Object(a.jsx)(o.a,{id:"appbar",className:"header-container",color:"secondary",position:"fixed",elevation:1,children:Object(a.jsx)(i.a,{children:Object(a.jsxs)(r.a,{className:"header-toolbar",disableGutters:!0,children:[Object(a.jsx)("div",{className:"header-left",children:t}),Object(a.jsx)("div",{className:"header-center",children:n}),Object(a.jsx)("div",{className:"header-right",children:c})]})})})}},254:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(0);var o=n(11),r=n(367),i=(n(266),n.p+"static/media/back-btn.715fa344.svg"),a=n(2),c=function(e){var t=e.className,n=e.onBackClicked,c=Object(o.g)().goBack;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(r.a,{className:t||"backButton",edge:"start",color:"inherit","aria-label":"back",onClick:n||c,children:Object(a.jsx)("img",{src:i,alt:"pic"})})})}},256:function(e,t,n){"use strict";var o=n(3),r=n(0);t.a=function(){var e=Object(r.useState)(window.innerWidth),t=Object(o.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)(window.innerHeight),c=Object(o.a)(a,2),l=c[0],s=c[1],d=Object(r.useRef)(),u=function(){clearTimeout(d.current),d.current=setTimeout((function(){var e=window.innerWidth,t=window.innerHeight;i(e),s(t)}),500)};return Object(r.useLayoutEffect)((function(){return window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[]),[n,l]}},262:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(0);var o=n(79),r=(n(271),n(216)),i=n(7),a=n(2),c=Object(r.a)((function(e){return{bold:{fontWeight:e.typography.platformFontWeight}}})),l=function(e){var t=e.children,n=c();return Object(a.jsx)(o.a,{className:Object(i.a)("page_header-container",n.bold),component:"h1",children:t})}},266:function(e,t,n){},268:function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));var o=n(20),r=n(5),i=n(3),a=n(0),c=n(277),l=n(253),s=n(254),d=n(262),u=n(278),p=n(216),f=n(23),b=n(448),m=n(219),g=n(367),j=n(505),h=n(469),v=n(470),O=n(223),w=n(353),x=n(354),y=n(79),k=n(491),C=n(395),S=n(88),I=n(299),P=n.n(I),E=n(256),L=n(81),N=n(62);var B=n(300),R=n.n(B),A=n(122),T=n(19),F=n(7),M=n(2),W=Object(p.a)((function(e){return{root:{position:"relative",paddingTop:"1rem"},filterBar:{height:function(e){return 1===e.step?"0px":"44px"},opacity:function(e){return 1===e.step?0:1},padding:"0 4px",margin:"0 auto",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"space-between",width:"96%",backgroundColor:"".concat(Object(f.e)(e.palette.primary.light,.75)),border:0,transition:"height 0.18s ease, opacity 0.15s ease"},addressSearchInput:{marginLeft:e.spacing(1),width:"100%"},iconButton:{textAlign:"right",padding:"10px 6px"},bottomSection:{position:"fixed",display:"flex",bottom:10,marginLeft:-6,width:"100%",justifyContent:"center"},bottomSectionActionButton:{padding:"1rem 1.5rem",borderRadius:"2rem",width:"100%",fontWeight:e.typography.platformFontWeight,fontSize:"0.8rem"},card:{width:"90%",padding:0,position:"relative",borderRadius:"1rem",marginBottom:"2rem"},fieldInput:{color:e.palette.customGrey.dark,"&::placeholder":{color:e.palette.customGrey.dark,opacity:1},fontSize:"0.8rem"},chips:{width:"95%",margin:"0 auto",justifyContent:"space-between"},chipLabel:{flex:"0 0 32%",textTransform:"uppercase",minWidth:0,fontSize:"0.8rem","& > span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},labelAs:{marginLeft:e.spacing(1),paddingBottom:"0.5rem",fontWeight:e.typography.platformFontWeight,fontSize:"0.8rem"},selectedAddressField:{display:"flex",borderRadius:"0.5rem",backgroundColor:"".concat(e.palette.primary.lighter),alignItems:"center",marginTop:"1rem",padding:"0.75rem 0.75rem"},placeholder:{flex:1,color:e.palette.customGrey.dark},editButton:{flex:"0 0 2rem",display:"inline-block",textTransform:"none",textAlign:"right"},predictionItems:{position:"absolute",display:"block",width:"100%",zIndex:1,top:"60px",backgroundColor:"white"},predictionItem:{"&:not(:last-child)":{borderBottom:"1px solid lightgrey"}},bold:{fontWeight:e.typography.platformFontWeight}}})),z=["HOME","WORK","OTHER"],G=function(e){var t,n,p,f=e.title,I=void 0===f?"Select Address":f,B=e.defaultAddress,G=void 0===B?{address:"",address2:"",notes:"",title:"HOME",place:void 0}:B,H=e.onBackButtonClicked,U=e.onUseAddressClicked,D=void 0===U?function(e){}:U,_=e.isEditingAddress,K=void 0!==_&&_,Z=Object(A.a)(),V=Object(a.useRef)(null),q=Object(a.useRef)(null),J=Object(a.useRef)(!0),X=Object(a.useState)(!1),Q=Object(i.a)(X,2),Y=Q[0],$=Q[1],ee=Object(L.b)(),te=ee.userEnabledLocation,ne=ee.setUserEnabledLocation,oe=ee.userLocation,re=ee.setUserLocation,ie=Object(T.b)().pushAlertPopUp,ae=Object(E.a)(),ce=Object(i.a)(ae,2)[1]-120,le=!!G.latitude,se=Object(a.useState)(0),de=Object(i.a)(se,2),ue=de[0],pe=de[1],fe=Object(a.useState)(z.findIndex((function(e){var t;return e.toLowerCase()===(null===G||void 0===G||null===(t=G.title)||void 0===t?void 0:t.toLowerCase())}))||0),be=Object(i.a)(fe,2),me=be[0],ge=be[1],je=Object(a.useState)(le?G.address:""),he=Object(i.a)(je,2),ve=he[0],Oe=he[1],we=Object(a.useState)(!1),xe=Object(i.a)(we,2),ye=xe[0],ke=xe[1],Ce=Object(a.useState)([]),Se=Object(i.a)(Ce,2),Ie=Se[0],Pe=Se[1],Ee=Object(a.useState)(void 0),Le=Object(i.a)(Ee,2),Ne=Le[0],Be=Le[1],Re=Object(a.useState)(G),Ae=Object(i.a)(Re,2),Te=Ae[0],Fe=Ae[1];n=V,p=function(){return ke(!1)},Object(a.useEffect)((function(){var e=function(e){n.current&&!n.current.contains(e.target)&&p(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[n,p]);var Me=W({step:ue,mapHeight:ce}),We=function(e){Fe((function(t){return Object(r.a)(Object(r.a)({},t),{},Object(o.a)({},e.target.name,e.target.checked||e.target.value))}))},ze=function(e,t,n){var o={lat:t,lng:n};return e.geocode({location:o}).then((function(e){return e.results[0]||null})).catch((function(e){return ie("Problem connecting to server. Please try again later"),console.warn("Geocoder failed due to: "+e),null}))},Ge=function(e){Oe(e.formatted_address),Fe((function(t){return Object(r.a)(Object(r.a)({},t),{},{address:e.formatted_address,place:e})})),Be(null)},He=function(e){Fe((function(t){return Object(r.a)(Object(r.a)({},t),{},{place:e})}))},Ue=Object(a.useMemo)((function(){var e=function(e,t){var n=e.center.lat(),o=e.center.lng();clearTimeout(q.current),q.current=setTimeout((function(){return ze(t,n,o).then(Ge)}),500)};return[["idle",function(t,n){e(t,n)},"once"],["dragend",function(t,n){e(t,n)}],["zoom_changed ",function(t,n){J.current?e(t,n):(!function(e,t){var n=e.center.lat(),o=e.center.lng();clearTimeout(q.current),q.current=setTimeout((function(){return ze(t,n,o).then(He)}),500)}(t,n),J.current=!0)}]]}),[]);return Object(a.useEffect)((function(){Te.place?$(!0):Object(N.c)((function(e){var t={lat:parseFloat(e.lat),lng:parseFloat(e.lng)};re(t),$(!0),ne(!0)}),(function(){return $(!0)}),(function(){return $(!0)}),ie)}),[Te.place]),Object(M.jsx)(c.a,{header:Object(M.jsx)(l.a,{leftSlot:Object(M.jsx)(s.a,{onBackClicked:H}),centerSlot:Object(M.jsx)(d.a,{children:I})}),body:Y?Object(M.jsxs)("div",{className:Me.root,children:[Object(M.jsxs)("div",{ref:V,children:[Object(M.jsx)(b.a,{flexShrink:0,flexGrow:1,children:Object(M.jsxs)(m.a,{elevation:0,component:"div",className:Me.filterBar,children:[Object(M.jsx)(g.a,{type:"submit",className:Me.iconButton,"aria-label":"search",children:Object(M.jsx)(P.a,{color:te?"primary":void 0})}),Object(M.jsx)(j.a,{className:Me.addressSearchInput,placeholder:"e.g. Name, Location",name:"address",inputProps:{"aria-label":"search store"},onChange:function(e){Oe(e.target.value)},value:ve,onFocus:function(){ke(!0)},autoComplete:"off"}),Object(M.jsx)(g.a,{onClick:function(){Oe("")},className:Me.iconButton,"aria-label":"search",children:ve.length>0?Object(M.jsx)(R.a,{color:"primary"}):null})]})}),ye&&Ie.length>0&&Object(M.jsx)(h.a,{className:Me.predictionItems,children:Ie.map((function(e,t){return Object(M.jsx)(v.a,{className:Me.predictionItem,onClick:(n=e,function(e,t){Oe(n.description),Fe((function(e){return Object(r.a)(Object(r.a)({},e),{},{address:n.description,place:n})})),Be(n),ke(!1)}),children:e.description},e.place_id);var n}))})]}),Object(M.jsx)(u.a,{height:0===ue?ce:ce/2,apiKey:S.a.googleMapKey,showCurrentUserLocation:!0,initialCenterPosition:le?{lat:parseFloat(G.latitude),lng:parseFloat(G.longitude)}:oe,centerPosition:oe,overridePlaceId:(null===Ne||void 0===Ne?void 0:Ne.place_id)||(null===(t=G.place)||void 0===t?void 0:t.place_id),search:ve,focusZoomLevel:18,onSearched:function(e){Pe(e)},onMapEvents:Ue,drawCenterIcon:!0,triggerZoomChangedRef:J,noCurrLocationMarker:!0,isEditingAddress:K,addressDetail:Te,setAddressDetail:Fe}),Object(M.jsx)("div",{className:Me.bottomSection,children:0===ue?Object(M.jsx)(O.a,{className:Me.bottomSectionActionButton,variant:"contained",color:"primary",style:{width:"70%",marginBottom:50},disabled:!Te.address,onClick:function(){pe((function(e){return e+1}))},children:"NEXT"}):Object(M.jsx)(w.a,{className:Me.card,children:Object(M.jsxs)(x.a,{children:[Object(M.jsxs)("div",{className:Me.selectedAddressField,children:[Object(M.jsx)(y.a,{variant:"body2",className:Me.placeholder,children:Te.address}),Object(M.jsx)(O.a,{className:Me.editButton,color:"primary",size:"small",onClick:function(){return pe(0)},children:"Edit"})]}),Object(M.jsx)(k.a,{label:"Floor/Unit",style:{margin:8},fullWidth:!0,name:"address2",onChange:We,placeholder:"Floor/Unit",margin:"normal",autoComplete:"off",InputLabelProps:{shrink:!0,classes:{root:Me.bold}},inputProps:{"aria-label":"enter floor/unit",className:Object(F.a)(Me.fieldInput)},value:Te.address2}),Object(M.jsx)(k.a,{label:"Note to rider",style:{margin:8},fullWidth:!0,name:"notes",onChange:We,placeholder:"e.g. landmark/building",margin:"normal",InputLabelProps:{shrink:!0,classes:{root:Me.bold}},autoComplete:"off",inputProps:{"aria-label":"enter note to rider",className:Object(F.a)(Me.fieldInput)},value:Te.notes}),Object(M.jsx)(y.a,{className:Object(F.a)(Me.labelAs,Me.bold),color:"textSecondary",children:"Label as"}),Object(M.jsx)(b.a,{className:Me.chips,display:"flex",justifyContent:"space-between",children:z.map((function(e,t){return Object(M.jsx)(C.a,{className:Me.chipLabel,component:"button",label:e,variant:"outlined",onClick:(n=t,function(){ge((function(e){return e!==n?n:e})),Fe((function(e){return Object(r.a)(Object(r.a)({},e),{},{title:z[n]})}))}),color:me===t?"primary":"default",style:{color:"".concat(me===t?"primary":Z.palette.customGrey.light)}});var n}))}),Object(M.jsx)("br",{}),Object(M.jsx)(O.a,{className:Me.bottomSectionActionButton,variant:"contained",color:"primary",style:{width:"90%",transform:"translateX(5%)"},onClick:function(){D(Te)},children:"USE THIS ADDRESS"})]})})})]}):Object(M.jsx)("div",{})})}},270:function(e,t,n){},271:function(e,t,n){},277:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(0);var o=n(216),r=n(350),i=n(2),a=Object(o.a)((function(){return{root:{paddingTop:"4rem",maxWidth:"unset",paddingLeft:6,paddingRight:6,position:"fixed",background:"white",top:0,left:0,width:"100%",height:"100%",zIndex:2e3}}})),c=function(e){var t=e.header,n=e.body,o=(e.footer,a());return Object(i.jsxs)(r.a,{className:o.root,children:[t,Object(i.jsx)("div",{children:n})]})}},278:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n(5),r=n(3),i=n(0),a=n(216),c=n.p+"static/media/BlueDotCirclePulsing.adddd586.svg",l=n.p+"static/media/map-center-marker.f7143404.svg",s=n(30),d=n(19),u=n(81),p=n(62),f=n(2),b=Object(a.a)((function(){return{mapHolder:{padding:"6px"},map:{position:"relative",height:function(e){return"calc(".concat(e.height+43,"px - 1rem)")},width:"100%",borderRadius:"12px",boxShadow:"0 0 4px 1px rgba(22, 22, 22, 0.1)",transition:"height 0.25s ease","& .gmnoprint":{display:"none"},"&::after":{width:22,height:40,display:function(e){return e.drawCenterIcon?"block":"none"},content:'" "',position:"absolute",top:"50%",left:"50%",margin:"-40px 0 0 -11px",background:"url('".concat(l,"')"),backgroundSize:"22px 40px",pointerEvents:"none"}},mapOverlay:{position:"fixed"},controlArea:{width:"90%",marginTop:"14px",borderRadius:"12px",boxSizing:"border-box",outline:"none",boxShadow:"0 0 12px 4px rgba(22, 22, 22, 0.2)",backgroundColor:"#eee",fontFamily:"Roboto"},querySection:{display:"flex",alignItems:"center",width:"100%"},queryInput:{flex:1,paddingRight:12},searchIconButton:{padding:10},resultList:{backgroundColor:"#eee",borderBottomLeftRadius:12,borderBottomRightRadius:12},resultListItem:{borderBottom:"1px solid lightgrey","&:last-child":{borderBottom:0}},loadingIcon:{width:"24px !important",height:"24px !important"}}})),m=function(e){var t=e.apiKey,n=e.height,a=e.overridePlaceId,l=e.search,m=void 0===l?void 0:l,g=e.initialCenterPosition,j=void 0===g?void 0:g,h=e.centerPosition,v=void 0===h?void 0:h,O=e.focusZoomLevel,w=void 0===O?12:O,x=e.markers,y=void 0===x?[]:x,k=e.changeableMarkers,C=void 0===k?[]:k,S=e.activeMarkerIndex,I=void 0===S?void 0:S,P=e.onMarkerClicked,E=void 0===P?function(e){}:P,L=e.markerInfoContent,N=void 0===L?null:L,B=e.markerIcon,R=void 0===B?null:B,A=e.showCurrentUserLocation,T=void 0!==A&&A,F=(e.storeIcon,e.drawCenterIcon),M=void 0!==F&&F,W=e.onMapEvents,z=void 0===W?[]:W,G=e.onSearched,H=void 0===G?function(e){}:G,U=e.updateActiveMarkerIndex,D=void 0===U?null:U,_=e.triggerZoomChangedRef,K=e.infoWindowRef,Z=e.noCurrLocationMarker,V=void 0!==Z&&Z,q=e.isEditingAddress,J=void 0!==q&&q,X=e.addressDetail,Q=void 0===X?{}:X,Y=e.setAddressDetail,$=void 0===Y?function(){}:Y,ee=Object(s.b)().scriptHasLoaded,te=Object(d.b)().pushAlertPopUp,ne=Object(u.b)().userEnabledLocation,oe=b({height:n,drawCenterIcon:M}),re=Object(i.useRef)(null),ie=Object(i.useRef)(null),ae=Object(i.useRef)(null),ce=Object(i.useRef)(null),le=Object(i.useRef)(null),se=Object(i.useRef)(null),de=Object(i.useRef)([]),ue=Object(i.useRef)(null),pe=Object(i.useRef)(null),fe=Object(i.useState)(!1),be=Object(r.a)(fe,2),me=be[0],ge=be[1];Object(i.useEffect)((function(){var e,t=function(e,t){try{if(t!==window.google.maps.places.PlacesServiceStatus.OK||!e)return void console.error(t);H(e)}catch(n){console.warn(n)}};m&&m.length>0&&(e=m,re&&re.current&&clearTimeout(re.current),re.current=setTimeout((function(){ue.current.getPlacePredictions({input:e,componentRestrictions:{country:"my"}},t)}),1e3))}),[m]),Object(i.useEffect)((function(){var e,t;v&&me&&(null===(e=ae.current)||void 0===e||e.setCenter(v),null===(t=ae.current)||void 0===t||t.setZoom(w))}),[v,w]),Object(i.useEffect)((function(){var e,t;v&&me&&(J||(null===(e=ae.current)||void 0===e||e.setCenter(v),null===(t=ae.current)||void 0===t||t.setZoom(w)))}),[me,v,w]),Object(i.useEffect)((function(){ee&&(!function(){if(ae.current){var e=ae.current,t=window.google.maps;Oe(e,t,y)}else{var n=window.google.maps,o=new n.Map(document.getElementById("map"),{center:j||{lat:3.139,lng:101.6869},disableDefaultUI:!0,gestureHandling:"greedy",zoom:j?w:18,clickableIcons:!1});ae.current=o;var r=new window.google.maps.Geocoder;ce.current=r,n.event.addListenerOnce(o,"tilesloaded",(function(){ge(!0)}));var i=document.getElementById("search-control");o.controls[n.ControlPosition.TOP_CENTER].push(i),Oe(o,n,y)}}(),ue.current=new window.google.maps.places.AutocompleteService,pe.current=new window.google.maps.places.PlacesService(document.getElementById("placeAttrId")))}),[ee,y]);var je=function(e,t){if(le.current)le.current.setPosition({lat:e.lat,lng:e.lng});else{if(V)return;var n=new window.google.maps.MarkerImage(c,null,new window.google.maps.Point(0,0),new window.google.maps.Point(30,30)),o=new window.google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:t,title:"Current Location",icon:n,zIndex:999});le.current=o}},he=function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var n={lat:+t.coords.latitude,lng:+t.coords.longitude};je(n,e)}),(function(){te("Please enable GPS service")}),p.b):te("Problem retrieving location. Please try again later")},ve=function(){var e;if(null===(e=window.google)||void 0===e?void 0:e.maps){var t=ae.current;try{return void my.getLocation({success:function(e){var n={lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)};je(n,t)},fail:function(e){switch(e.error){case"11":te("Problem retrieving location. Please try again later");break;case"12":te("Problem connecting network, please try again");break;case"13":case"14":te("Problem retrieving location. Please try again later")}he(t)}})}catch(n){he(t)}}},Oe=function(e,t,n){var o=new t.InfoWindow,r=document.getElementById("infowindow-content"),i=document.getElementById("map").clientWidth-50;i>600&&(i=600),o.setOptions({minWidth:i}),o.setContent(r),K&&(K.current=o),n.map((function(n,r){var i=new t.Marker({position:{lat:parseFloat(n.latitude),lng:parseFloat(n.longitude)},map:e,title:n.storeName,icon:R});return window.google.maps.event.addListener(i,"click",(function(){o.open(e,i),E(n,r)})),de.current.push(i),null}));var a=new t.Marker({map:e,anchorPoint:new t.Point(0,-29)});se.current=a};return Object(i.useEffect)((function(){if(0!==C.length&&ee){ae.current,window.google.maps;!function(e,t,n){for(var o=de.current,r=function(e){n.find((function(t){return t.storeName===o[e].getTitle()}))?(o[e].setVisible(!0),o[e].setClickable(!0)):(o[e].setVisible(!1),o[e].setClickable(!1))},i=0;i<o.length;i++)r(i)}(0,0,C)}}),[C,ee]),Object(i.useEffect)((function(){me&&a&&function(e){var t=se.current;t.setVisible(!1),pe.current.getDetails({placeId:e},(function(e,n){if(n===window.google.maps.places.PlacesServiceStatus.OK){var r=e.geometry,i=ae.current;if(!r||!r.location)return void te("Problem retrieving location. Please try again later");_.current=!1,r.viewport?(ae.current.fitBounds(r.viewport),i.setCenter(r.viewport.getCenter())):i.setCenter(r.location),t.setPosition(r.location),t.setVisible(!M);var a=r.location;$(Object(o.a)(Object(o.a)({},Q),{},{place:e,latitude:a.lat(),longitude:a.lng()}))}else te("Please enable GPS service")}))}(a)}),[M,me,a]),Object(i.useEffect)((function(){if(me&&ae.current&&T&&ne)return ve(),ie.current=setInterval(ve,2e3),function(){var e;clearInterval(ie.current),null===(e=le.current)||void 0===e||e.setMap(null)}}),[me,T,ne]),Object(i.useEffect)((function(){t||te("Google Service not available, please contact app developer")}),[t,te]),Object(i.useEffect)((function(){me&&void 0!==I&&window.google.maps.event.trigger(de.current[I],"click")}),[me,I,D]),Object(i.useEffect)((function(){if(me&&ce.current){var e=window.google.maps.event;return z.map((function(t){var n="addListener";return!!t[2]&&"once"===t[2]&&(n="addListenerOnce"),e[n](ae.current,t[0],(function(){t[1](ae.current,ce.current)})),null})),function(){z.map((function(t){return e.removeListener(ae.current,t[0],(function(){t[1](ae.current,ce.current)})),null}))}}}),[me,z]),Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:oe.mapHolder,children:[Object(f.jsx)("div",{className:oe.mapOverlay,children:Object(f.jsx)("div",{id:"infowindow-content",children:N})}),Object(f.jsx)("div",{id:"map",className:oe.map}),Object(f.jsx)("div",{id:"placeAttrId"})]})})};m.displayName="Google Map Component"}}]);
//# sourceMappingURL=5.1a7b389c.chunk.js.map